<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="The Superior Way To Manage Data In Your React App">
    <meta name="author" content="Oppikone">

    <title>Introducing The Metamatic Framework</title>

    <!-- Bootstrap Core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Theme CSS -->
    <link href="css/clean-blog.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div style="display:none" class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    Menu <i class="fa fa-bars"></i>
                </button>
                <a class="navbar-brand" href="http://www.oppikone.fi">Oppikone</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div  class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul style display="none" class="nav navbar-nav navbar-right">
                    <li>
                        <a href="http://www.oppikone.fi">Oppikone</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header class="intro-header" style="background-image: url('/images/full/introducing-metamate-framework.png')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="post-heading" style="background-color:rgba(50,50,50,0.3)">
                        <h1 style="color:white">Introducing The Metamatic Framework</h1>
                        <h2 style="color:yellow" class="subheading">The Superior Way To Manage Data In Your React App</h2>
                        <span class="meta">Posted by <a href="#">Heikki Kupiainen/Oppikone</a> on 06.07.2018 11:45:15</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Post Content -->
    <article>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          		<h1 id="introducing-the-metamatic-framework-for-reactjs">Introducing The Metamatic Framework For ReactJS</h1>
<p>This article is for you if you are familiar with ReactJS framework for frontend development and maybe even have already wondered how you should handle data in your browser-based piece of software. This article is also for you if you know what is Redux and ever wondered if there is a more straightforward way to achieve central data management in a web app.</p>
<p>In my <a href="http://www.oppikone.fi/blog/introducing-synchronous-dispatcher.html" title="Introducing Synchronous Dispatcher">previous article</a> I wrote about the minuscule event-dispatching framework with a promise to greatly simplify frontend application development. In this article I will introduce the missing piece of the puzzle and show how to use Synchronous Dispatcher to create fantastic event driven software.</p>
<p>In this article will introduce <strong>The Metamatic Framework</strong>, that I have designed for you, dear Coder, to make your life easier. Metamatic framework is a Redux-alternative for centrally managing data in your Frontend app.</p>
<p>In these examples I'll use ES6 syntax but there should be absolutely no problem to use TypeScript or JavaScript either for Metamatic coding!</p>
<h2 id="so-what-is-the-metamatic-framework">So What Is The Metamatic Framework?</h2>
<p>The Metamatic framework is a little bit of software code - in deed, a very very very tiny bit of software code. Actually it's not at all so much about code, it's rather a new way of managing the data in your app,similarly to Redux framework. It is meant to be used together with JavaScript, TypeScript, EcmaScript variants, whatever JavaScript variant. People use typically such data handling frameworks such as Redux for coding with these languages. I have used Redux in many projects. But I never really liked it. To me, it feels that you must write too much code to get some very simple things done. Redux is too much about obsessive rituals.</p>
<p>I wanted to create a framework that essentially offers the core benefit that Redux has to offer but is far less code, and needs far less coding from you to get things done.</p>
<p>And I think I have just succeeded in doing so!</p>
<h2 id="why-use-metamatic">Why Use Metamatic?</h2>
<p>When you code frontend software that run inside browser (or phone or wherever) and once you advance further than creating some &quot;Hello World&quot; apps, you will notice that the issue with data integrity grows in size. You will have many tabs and sections etc in your app. You implement data retrieval functions that get snippets of data from the server.</p>
<p>It will all go well until you will face this kind of problems. The user updated some data (their phone number, whatever) on one form on one tab but when they enter another tab so they will see to their dismay that the data they just updated was not changed accordingly on the other tab.</p>
<p>The reason to this kind of problem is that there are several copies of the same data in different parts of the application. The obvious solution to this is to place all data into one central part of the application. When the user changes the data in some part of the app, then the corresponding data entry is updated in the central data location - from there change then automatically radiates to all parts of the app where it is being displayed. There are several ways to implement this kind of central data handling. One of them is the &quot;Redux&quot; framework.</p>
<p>However, I am not a fan of Redux. I have seen many times that connecting data to the &quot;Redux store&quot; requires too many rituals. The same effect can be achieved also by simple means without too many moving parts.</p>
<h2 id="getting-started-with-metamatic">Getting Started With Metamatic</h2>
<p>When you have your created your first React app and you have some kind of form for data manipulation, then it's time to connect that form to the central Metamatic data storage. Let's say that we have created a car app web store and we have created a component for showing car details. In <strong>CarDetails</strong> componente, we want to show details of some available car model. Now, we need that CarDetails component to retrieve the car data.</p>
<p>Okay, now that we have <strong>CarDetails</strong> component, lets import first the essential functions from <strong>synchronous-dispatcher</strong>. Add the import statement to the beginning of your class:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> handle<span class="op">,</span> handleAll<span class="op">,</span> dispatch<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;synchronous-dispatcher&#39;</span></code></pre></div>
<p>And dont forget to install <strong>synchronous-dispatcher</strong> before using it, of course! With Yarn or Npm:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">npm install synchronous<span class="op">-</span>dispatcher</code></pre></div>
<p>or</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">yarn install synchronous<span class="op">-</span>dispatcher</code></pre></div>
<p>That's it!</p>
<h2 id="connect-your-component-to-the-metamatic-data-store">Connect Your Component To The Metamatic Data Store</h2>
<p>Now we have all essential data event methods in our use! The next thing we need is to connect our <strong>CarDetails</strong> class to the Metamatic global data state, which I call <strong>MetaStore</strong>. MetaStore is the central data store that is responsible for radiating the data to all parts of the app that are listening, when the data changes. When we want to connect a react component to MetaStore, we must define which events we want our React component to listen to. Let's decide that when the car data is loaded from the server by MetaStore, <strong>CarDetails</strong> component must be updated. We modify <strong>CarDetails</strong> component's constructor to listen to CAR-DATA-CHANGE event:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="at">constructor</span>() <span class="op">{</span>
    <span class="kw">super</span>()<span class="op">;</span>
    <span class="at">handle</span>(<span class="st">&#39;CAR-DATA-CHANGE&#39;</span><span class="op">,</span> <span class="kw">this</span>.<span class="at">forceUpdate</span>)<span class="op">;</span>
  <span class="op">}</span></code></pre></div>
<p>Quite straightforward, isn't it? We have connected <strong>CarDetails</strong> component to the central data storage with practically one single line of code! But what if our CarDetails component needs two different data types which might thechange separately, let's say owner data. We need to connect the component to listen to two different events, which both must cause the component to refresh. We can do this using handleAll function, which allows us to connect many metamatic events to the component:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="at">constructor</span>() <span class="op">{</span>
    <span class="kw">super</span>()<span class="op">;</span>
    <span class="at">handleAll</span>([<span class="st">&#39;CAR-DATA-CHANGE&#39;</span><span class="op">,</span><span class="st">&#39;OWNER-DATA-CHANGE&#39;</span>]<span class="op">,</span> <span class="kw">this</span>.<span class="at">forceUpdate</span>)<span class="op">;</span>
  <span class="op">}</span></code></pre></div>
<h2 id="implementing-a-metamatic-data-storage-meta-store">Implementing A Metamatic Data Storage, Meta Store</h2>
<p>Let's implement the actual metamatic data storage, MetaStore. Essentially, MetaStore just needs the exactly same super simple utility functions from synchronous-dispatcher as do all other parts of the app as well. But now that we want our MetaStore to actually load the datarom server, let's add an AJAX library to MetaStore. I'll use <strong>axios</strong> but be free to use any other library as you wish. Let's add the essential imports to the beginning of MetaStore.js file:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> handle<span class="op">,</span> dispatch <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;synchronous-dispatcher&#39;</span>
<span class="im">import</span> axios <span class="im">from</span> <span class="st">&#39;axios&#39;</span><span class="op">;</span></code></pre></div>
<p>Then, let's define the actual MetaStore object:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">const</span> metaStore <span class="op">=</span> <span class="op">{</span>
  <span class="dt">carData</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span>
  <span class="dt">ownerData</span><span class="op">:</span> <span class="kw">null</span>
<span class="op">}</span></code></pre></div>
<p>Let's also create the initialization funcction for MetaStore:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">export</span> <span class="kw">const</span> initMetaStore <span class="op">=</span> () <span class="op">=&gt;</span> <span class="op">{};</span></code></pre></div>
<p>Now, it's time to get serious. We want to make sure that MetaStore will load car data when it receives request for car data! We expand initMetaStore function to respond to car data request and do something when any component in the application dispatches a request for car data. Let's make metaStore to listen for REQUEST-CAR-DATA event and dispatch a car CAR-DATA-CHANGE event if the car data is available. If not, MetaStore shall delegate the problem and dispatch 'LOAD-CAR-DATA' event. Then some other part in the app can listen to that event and react in an appropriate way:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">export</span> <span class="kw">const</span> initMetaStore <span class="op">=</span> () <span class="op">=&gt;</span> <span class="op">{</span>
   <span class="at">handle</span>(<span class="st">&#39;REQUEST-CAR-DATA&#39;</span><span class="op">,</span> () <span class="op">=&gt;</span> <span class="op">{</span>
      <span class="cf">if</span> (<span class="va">metaStore</span>.<span class="at">carData</span>) <span class="op">{</span>
         <span class="cf">return</span> <span class="at">dispatch</span>(<span class="st">&#39;CAR-DATA-CHANGE&#39;</span><span class="op">,</span> <span class="va">metaStore</span>.<span class="at">carData</span>)   
      <span class="op">}</span>       
      <span class="at">dispatch</span>(<span class="st">&#39;LOAD-CAR-DATA&#39;</span>)<span class="op">;</span>
    <span class="op">}</span>)<span class="op">;</span>
<span class="op">};</span></code></pre></div>
<p>Now we need, of course, someone to listen for 'LOAD-CAR-DATA' event. That listener will need to load the actual data when the event was received. We can implement this event handler wherever we like but It's conventient to do it inside the MetaStore now that it's not all too bkig at this point. When the file size grows too big, I think, then it's the right time to split ehandlers into separate files. Let's add the car data loading request handler inside initMetaStore function:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">export</span> <span class="kw">const</span> initMetaStore <span class="op">=</span> () <span class="op">=&gt;</span> <span class="op">{</span>
   
   ...
   
   <span class="at">handle</span>(<span class="st">&#39;LOAD-CAR-DATA&#39;</span><span class="op">,</span> (formName) <span class="op">=&gt;</span> <span class="op">{</span>
      <span class="va">axios</span>.<span class="at">get</span>(<span class="vs">`</span><span class="sc">${</span>YOUR_CAR_DATA_URL_HERE<span class="sc">}</span><span class="vs">`</span>)
         .<span class="at">then</span>(response <span class="op">=&gt;</span> <span class="op">{</span>
             <span class="at">dispatch</span>(<span class="st">&#39;LOAD-CAR-DATA-SUCCESS&#39;</span><span class="op">,</span> <span class="va">response</span>.<span class="at">data</span>)
         <span class="op">}</span>)
        .<span class="at">catch</span>(error <span class="op">=&gt;</span> <span class="at">dispatch</span>(<span class="st">&quot;LOAD-CAR-DATA-ERROR&quot;</span><span class="op">,</span> error))<span class="op">;</span>
      <span class="op">}</span>)
   <span class="op">}</span>)<span class="op">;</span>
}<span class="op">;</span></code></pre></div>

                </div>
            </div>
        </div>
    </article>

    <hr>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <ul style="display:none" class="list-inline text-center">
                        <li>
                            <a href="#">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    </ul>
		    <p class="copyright text-muted">View this article on <a href="https://github.com/develprr/oppikone-blog/commits/master/introducing-metamate-framework.html">GitHub!</a></p>
                    <p class="copyright text-muted">Copyright &copy; Oppikone 2018</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="vendor/jquery/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>

    <!-- Contact Form JavaScript -->
    <script src="js/jqBootstrapValidation.js"></script>
    <script src="js/contact_me.js"></script>

    <!-- Theme JavaScript -->
    <script src="js/clean-blog.min.js"></script>

</body>

</html>